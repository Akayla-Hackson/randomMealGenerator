<!DOCTYPE html>
<html>
<style>

#title1 {
position: fixed;
color: blue;
left:36%;
top:1%;
padding:2px;
}


@import "bourbon";

body {
	background: #eee !important;	
}

#loginDisplay , #signDisplay{
    background-color: #fff;
    width: 40%;
    margin: 80px auto;
    border-radius: 10px;
    padding: 20px;
    border-left: 5px solid #009688;
    box-shadow: 0px 0px 0px 0px #3f51b5;
}

.login>.row>h2 {
    margin: auto;
}

.btn-form {
    width: 100%;
    margin-top: 20px;
}

#displayMessage {
    position: fixed;
    top:48%;
    left:30%;
    text-size: 400px;
}

#col1 {
position: fixed;
top: 70%;
left:18%;
padding: 10px;
}

#col2 { 
position: fixed;
top: 70%;
left:43%;
padding: 10px;
}
#col3 {
position: fixed;
top: 70%;
left:65%;
padding: 10px;
}

#greatG {
position: fixed;
top:25%;
left:19%;
width: 150px;
height: 280px;
}
#theGiver {
position: fixed;
top:25%;
left:43%;
width: 150px;
height: 280px;
}
#kiteR {
position: fixed;
top:25%;
left:67%;
width: 150px;
height: 280px;
}
#refreshButton {
position: fixed;
top: 20%;
left:70%;
padding: 10px;
}
</style>

	<head>
		<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"> </script>
		<!-- Required meta tags -->
    		<meta charset="utf-8">
    		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    		<!-- Bootstrap CSS -->
    		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        		integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	</head>
	<body>
		<h1 id=title1>Akayla's Bookstore</h1>
		<!-- login setup -->
		<div class="container1" id="loginDisplay">
			<div class="login">
            			<div class="row">
                			<h2>Please Login</h2>
                    			<div class="col-md-12">
						 <form action="/auth_check" method="post">
						<label for="username">Username</label>
                    					<input type="text" class="form-control" id="user" name="username" placeholder="Ex. youremail@mail.com">
                    			<br>
                    				<label for="password">Password</label>
                    					<input type="password" class="form-control" id="pwd" name="password" placeholder="Ex. A123@paswod">
           				</div>
				</div>
            			<div class="row">
                			<div class="col-md-6">
                    				<input type="submit" id="Login" value="Login" class="btn btn-outline-primary btn-form">
						<p id="create_status"></p>
						</form>
					</div>
                			<div class="col-md-6">
                    				<input type="submit" id="register" value="Signup"onclick="switchLog()" class="btn btn-outline-success btn-form">
					</div>
                    		</div>
                	</div>
            	</div>

		<!-- signup setup -->
		<div class="container2" id="signDisplay" style="display: none;">
                        <div class="login">
                                <div class="row">
                                        <h2>Please Signup</h2>
					<div class="col-md-12">        
						<form action="/auth" method="post">
                                                <label for="username">Username</label>
                                                        <input type="text" class="form-control" id="user" name="username" placeholder="Ex. youremail@mail.com">
                                        <br>
                                                <label for="password">Password</label>
                                                        <input type="password" class="form-control" id="pwd" name="password" placeholder="Ex. A123@paswod">
                                	</div>
				</div>
                                <div class="row">
					<div class="col-md-6">
                                                <input type="submit" id="Login" value="Login" class="btn btn-outline-primary btn-form">
                                                <p id="create_status"></p>
                                        </div>
					<div class="col-md-6">
						<input type="submit" id="register" value="Signup"  class="btn btn-outline-success btn-form">
						 </form>
					</div>
                                </div>
                        </div>
                </div>
		<!-- Books Page -->
		<div class="bContainer" id="bookPage" style="display:none;">
			<div id="col1">
				<img src="https://i.ibb.co/NpvncXV/great-Gatsby.jpg" alt="great gatsby" id="greatG"></img>
				<h3 id="bname1"></h3>
				<p id="bprice1"></p>
				<form action="/buy" method="post">
                                        <button id="buyButton1" type="submit">Buy Book</button>
                                        <input id="bn1" name="bname" type="hidden" value="">
                                        <input id="bp1" name="bprice" type="hidden" value="">
				</form>
			</div>
			<div id="col2">
				<img src="https://i.ibb.co/BCwX2bN/giver.jpg" alt="giver" id="theGiver"></img>
				<h3 id="bname2"></h3>
                                <p id="bprice2"></p>
                                <form action="/buy" method="post">
					<button id="buyButton2" type="submit">Buy Book</button>
                                        <input id="bn2" name="bname" type="hidden" value="">
                                        <input id="bp2" name="bprice" type="hidden" value="">
				</form>	
			</div>
			<div id="col3">
				<img src="https://i.ibb.co/sCQx1TD/kite-Runner.jpg" alt="kite runner" id="kiteR"></img>
                                <h3 id="bname3"></h3>
                                <p id="bprice3"></p>
				<form action="/buy" method="post">
					<button id="buyButton3" type="submit">Buy Book</button>
					<input id="bn3" name="bname" type="hidden" value="">
                			<input id="bp3" name="bprice" type="hidden" value="">
				</form>
                        </div>
		</div>
		<!-- Ending Page -->
		<h1 id="displayMessage" style="display: none;">Thank You For Your Purchase!</h1>
		<button id="refreshButton" type="button" style="display: none;"onclick="getLoginPage()">Back To Login</button>
	<script>

		function switchLog()
		{
			var loginContainer = document.getElementById("loginDisplay");
			loginContainer.style.display = "none";
			var signupContainer = document.getElementById("signDisplay");
			signupContainer.style.display = "block";
		}
		

		//checks createErrors
    		$.getJSON("/createErrors", function(status){
        		$('#create_status').html(status['status'])
    		})

		//goes to next page
		 $.getJSON("/next", function(nextPage){
		if(nextPage['nextP'] == "booksP")
			{
				$('#loginDisplay').hide();
				$('#signDisplay').hide();
				$('#bookPage').show();
				$('#refreshButton').hide();
			}
		else if(nextPage['nextP'] == "loginP")
			{
			 	$('#loginDisplay').show();
                       	 	$('#bookPage').hide();
				$('#refreshButton').hide();
			}  
		})

		function restyle()
		{
			var loginContainer = document.getElementById("loginDisplay");
                        loginContainer.style.display = "none";
                        var signupContainer = document.getElementById("signDisplay");
                        signupContainer.style.display = "none";
			var booksPage = document.getElementById("bookPage");
                        booksPage.style.display = "none";
			var displayMesg = document.getElementById("displayMessage");
			displayMesg.style.display = "block";
			var refreshButton = document.getElementById("refreshButton");
			refreshButton.style.display = "block";
		}


		function getLoginPage()
		{
			setTimeout(()=>{
			window.location.reload(true);
			}, 60000)

			var loginContainer = document.getElementById("loginDisplay");
                        loginContainer.style.display = "block";
                        var signupContainer = document.getElementById("signDisplay");
                        signupContainer.style.display = "none";
                        var booksPage = document.getElementById("bookPage");
                        booksPage.style.display = "none";
                        var displayMesg = document.getElementById("displayMessage");
                        displayMesg.style.display = "none";
                        var refreshButton = document.getElementById("refreshButton");
                        refreshButton.style.display = "none";
		}


		$.getJSON("/bought", function(message)
			{
				if(message.buy == "bought")
				{
					restyle();
				}
			})

		$.getJSON("/getBooks", function(myBooks)
		
			{
				var arrayLength = 3;
				var allBooks = [arrayLength];
				for (var i = 0; i < myBooks.myBooks.length; i++) {
   					var object = myBooks.myBooks[i];
					allBooks[i] = object;
					for (property in object) {
      						var value = object[property];
					}
				}
				$('#bname1').html(allBooks[0][0]);
                                $('#bname2').html(allBooks[1][0]);
                                $('#bname3').html(allBooks[2][0]);
				$('#bprice1').html('$' + allBooks[0][1]);
                                $('#bprice2').html('$' + allBooks[1][1]);
                                $('#bprice3').html('$' + allBooks[2][1]);


				$('#bn1').val(allBooks[0][0]);
                                $('#bn2').val(allBooks[1][0]);
                                $('#bn3').val(allBooks[2][0]);
                                $('#bp1').val(allBooks[0][1]);
                                $('#bp2').val(allBooks[1][1]);
                                $('#bp3').val(allBooks[2][1]);
			})

	</script>
	</body>
</html>
